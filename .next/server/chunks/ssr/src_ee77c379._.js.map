{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnebraeckman/Documents/GitHub/eventRunner/src/components/features/opportunities/OpportunityCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useSortable } from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\nimport { \n  Calendar, \n  Users, \n  Euro, \n  MapPin, \n  Clock,\n  MoreHorizontal,\n  Edit,\n  Trash2,\n  User,\n  AlertTriangle\n} from \"lucide-react\";\nimport type { Opportunity } from \"~/lib/types/opportunity\";\nimport { format } from \"date-fns\";\n\ninterface OpportunityCardProps {\n  opportunity: Opportunity;\n  isDragging?: boolean;\n  onEdit?: (opportunity: Opportunity) => void;\n  onDelete?: (opportunityId: string) => void;\n  isSelected?: boolean;\n  onToggleSelection?: (opportunity: Opportunity) => void;\n  isSelectionMode?: boolean;\n  allOpportunities?: Opportunity[];\n}\n\nconst EVENT_TYPE_COLORS: Record<string, string> = {\n  WEDDING: \"bg-pink-100 text-pink-800\",\n  CORPORATE: \"bg-blue-100 text-blue-800\",\n  GALA: \"bg-purple-100 text-purple-800\",\n  CONFERENCE: \"bg-green-100 text-green-800\",\n  BIRTHDAY: \"bg-yellow-100 text-yellow-800\",\n  ANNIVERSARY: \"bg-indigo-100 text-indigo-800\",\n  OTHER: \"bg-gray-100 text-gray-800\",\n};\n\nexport function OpportunityCard({ \n  opportunity, \n  isDragging, \n  onEdit, \n  onDelete, \n  isSelected, \n  onToggleSelection, \n  isSelectionMode,\n  allOpportunities = []\n}: OpportunityCardProps) {\n  const [showActions, setShowActions] = useState(false);\n  \n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging: isSortableDragging,\n  } = useSortable({\n    id: opportunity._id,\n  });\n\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n  };\n\n  const eventTypeColor = EVENT_TYPE_COLORS[opportunity.eventType] || EVENT_TYPE_COLORS.OTHER;\n  \n  // Check for date conflicts with other opportunities\n  const hasDateConflict = allOpportunities.some(opp => \n    opp._id !== opportunity._id && \n    opp.isActive && \n    new Date(opp.eventDate).toDateString() === new Date(opportunity.eventDate).toDateString()\n  );\n  \n  const conflictingOpportunities = allOpportunities.filter(opp =>\n    opp._id !== opportunity._id && \n    opp.isActive && \n    new Date(opp.eventDate).toDateString() === new Date(opportunity.eventDate).toDateString()\n  );\n\n  if (isDragging || isSortableDragging) {\n    return (\n      <div className=\"bg-white rounded-lg shadow-lg border-2 border-blue-300 p-4 opacity-50 rotate-2\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <h4 className=\"font-semibold text-gray-900 truncate\">{opportunity.name}</h4>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      ref={setNodeRef}\n      style={style}\n      {...attributes}\n      {...listeners}\n      className={`\n        bg-white rounded-lg shadow-sm border p-4 hover:shadow-md transition-all cursor-grab active:cursor-grabbing\n        ${isSelected ? 'border-blue-500 bg-blue-50' : hasDateConflict ? 'border-orange-300 bg-orange-50' : 'border-gray-200'}\n        ${isSelectionMode ? 'cursor-pointer' : ''}\n        ${hasDateConflict ? 'ring-1 ring-orange-200' : ''}\n      `}\n      onMouseEnter={() => setShowActions(true)}\n      onMouseLeave={() => setShowActions(false)}\n      onClick={(e) => {\n        if (isSelectionMode && e.ctrlKey || e.metaKey) {\n          e.preventDefault();\n          e.stopPropagation();\n          onToggleSelection?.(opportunity);\n        }\n      }}\n    >\n      {/* Header */}\n      <div className=\"flex items-start justify-between mb-3\">\n        <div className=\"flex items-center space-x-2 flex-1\">\n          {isSelectionMode && (\n            <input\n              type=\"checkbox\"\n              checked={isSelected}\n              onChange={(e) => {\n                e.stopPropagation();\n                onToggleSelection?.(opportunity);\n              }}\n              className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n            />\n          )}\n          <h4 className=\"font-semibold text-gray-900 truncate\">{opportunity.name}</h4>\n        </div>\n        \n        {showActions && !isSelectionMode && (\n          <div className=\"flex items-center space-x-1\">\n            <button \n              onClick={(e) => {\n                e.stopPropagation();\n                onEdit?.(opportunity);\n              }}\n              className=\"p-1 hover:bg-gray-100 rounded\"\n              title=\"Edit opportunity\"\n            >\n              <Edit className=\"w-4 h-4 text-gray-500\" />\n            </button>\n            <button \n              onClick={(e) => {\n                e.stopPropagation();\n                if (confirm(\"Are you sure you want to delete this opportunity?\")) {\n                  onDelete?.(opportunity._id);\n                }\n              }}\n              className=\"p-1 hover:bg-gray-100 rounded\"\n              title=\"Delete opportunity\"\n            >\n              <Trash2 className=\"w-4 h-4 text-red-500\" />\n            </button>\n            <button className=\"p-1 hover:bg-gray-100 rounded\">\n              <MoreHorizontal className=\"w-4 h-4 text-gray-500\" />\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Event Type Badge */}\n      <div className=\"mb-3\">\n        <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${eventTypeColor}`}>\n          {opportunity.eventType.toLowerCase().replace('_', ' ')}\n        </span>\n      </div>\n\n      {/* Value and Probability */}\n      <div className=\"flex items-center justify-between mb-3\">\n        <div className=\"flex items-center text-sm text-gray-600\">\n          <Euro className=\"w-4 h-4 mr-1\" />\n          <span className=\"font-medium\">€{opportunity.value.toLocaleString()}</span>\n        </div>\n        <div className=\"flex items-center text-sm text-gray-600\">\n          <span className=\"font-medium\">{opportunity.probability || 0}%</span>\n        </div>\n      </div>\n\n      {/* Event Details */}\n      <div className=\"space-y-2 text-sm text-gray-600\">\n        {/* Event Date */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center\">\n            <Calendar className=\"w-4 h-4 mr-2\" />\n            <span>{format(new Date(opportunity.eventDate), 'MMM dd, yyyy')}</span>\n          </div>\n          {hasDateConflict && (\n            <div className=\"flex items-center\" title={`Date conflict with ${conflictingOpportunities.length} other opportunity/opportunities`}>\n              <AlertTriangle className=\"w-4 h-4 text-orange-500\" />\n              <span className=\"text-xs text-orange-600 ml-1\">{conflictingOpportunities.length}</span>\n            </div>\n          )}\n        </div>\n\n        {/* Guest Count */}\n        <div className=\"flex items-center\">\n          <Users className=\"w-4 h-4 mr-2\" />\n          <span>{opportunity.guestCount} guests</span>\n        </div>\n\n        {/* Venue Requirements */}\n        {opportunity.venueRequirements && (\n          <div className=\"flex items-center\">\n            <MapPin className=\"w-4 h-4 mr-2\" />\n            <span className=\"truncate\">{opportunity.venueRequirements}</span>\n          </div>\n        )}\n\n        {/* Expected Close Date */}\n        {opportunity.expectedCloseDate && (\n          <div className=\"flex items-center\">\n            <Clock className=\"w-4 h-4 mr-2\" />\n            <span>Close: {format(new Date(opportunity.expectedCloseDate), 'MMM dd')}</span>\n          </div>\n        )}\n      </div>\n\n      {/* Description */}\n      {opportunity.description && (\n        <div className=\"mt-3 pt-3 border-t border-gray-100\">\n          <p className=\"text-sm text-gray-600 line-clamp-2\">{opportunity.description}</p>\n        </div>\n      )}\n\n      {/* Footer */}\n      <div className=\"mt-3 pt-3 border-t border-gray-100 flex items-center justify-between\">\n        <div className=\"text-xs text-gray-500\">\n          Updated {format(new Date(opportunity.updatedAt), 'MMM dd')}\n        </div>\n        \n        {opportunity.assignedTo && (\n          <div className=\"flex items-center text-xs text-gray-500\">\n            <User className=\"w-3 h-3 mr-1\" />\n            <span>Assigned</span>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AAlBA;;;;;;;AA+BA,MAAM,oBAA4C;IAChD,SAAS;IACT,WAAW;IACX,MAAM;IACN,YAAY;IACZ,UAAU;IACV,aAAa;IACb,OAAO;AACT;AAEO,SAAS,gBAAgB,EAC9B,WAAW,EACX,UAAU,EACV,MAAM,EACN,QAAQ,EACR,UAAU,EACV,iBAAiB,EACjB,eAAe,EACf,mBAAmB,EAAE,EACA;IACrB,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE/C,MAAM,EACJ,UAAU,EACV,SAAS,EACT,UAAU,EACV,SAAS,EACT,UAAU,EACV,YAAY,kBAAkB,EAC/B,GAAG,CAAA,GAAA,mKAAA,CAAA,cAAW,AAAD,EAAE;QACd,IAAI,YAAY,GAAG;IACrB;IAEA,MAAM,QAAQ;QACZ,WAAW,qKAAA,CAAA,MAAG,CAAC,SAAS,CAAC,QAAQ,CAAC;QAClC;IACF;IAEA,MAAM,iBAAiB,iBAAiB,CAAC,YAAY,SAAS,CAAC,IAAI,kBAAkB,KAAK;IAE1F,oDAAoD;IACpD,MAAM,kBAAkB,iBAAiB,IAAI,CAAC,CAAA,MAC5C,IAAI,GAAG,KAAK,YAAY,GAAG,IAC3B,IAAI,QAAQ,IACZ,IAAI,KAAK,IAAI,SAAS,EAAE,YAAY,OAAO,IAAI,KAAK,YAAY,SAAS,EAAE,YAAY;IAGzF,MAAM,2BAA2B,iBAAiB,MAAM,CAAC,CAAA,MACvD,IAAI,GAAG,KAAK,YAAY,GAAG,IAC3B,IAAI,QAAQ,IACZ,IAAI,KAAK,IAAI,SAAS,EAAE,YAAY,OAAO,IAAI,KAAK,YAAY,SAAS,EAAE,YAAY;IAGzF,IAAI,cAAc,oBAAoB;QACpC,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAG,WAAU;8BAAwC,YAAY,IAAI;;;;;;;;;;;;;;;;IAI9E;IAEA,qBACE,8OAAC;QACC,KAAK;QACL,OAAO;QACN,GAAG,UAAU;QACb,GAAG,SAAS;QACb,WAAW,CAAC;;QAEV,EAAE,aAAa,+BAA+B,kBAAkB,mCAAmC,kBAAkB;QACrH,EAAE,kBAAkB,mBAAmB,GAAG;QAC1C,EAAE,kBAAkB,2BAA2B,GAAG;MACpD,CAAC;QACD,cAAc,IAAM,eAAe;QACnC,cAAc,IAAM,eAAe;QACnC,SAAS,CAAC;YACR,IAAI,mBAAmB,EAAE,OAAO,IAAI,EAAE,OAAO,EAAE;gBAC7C,EAAE,cAAc;gBAChB,EAAE,eAAe;gBACjB,oBAAoB;YACtB;QACF;;0BAGA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;4BACZ,iCACC,8OAAC;gCACC,MAAK;gCACL,SAAS;gCACT,UAAU,CAAC;oCACT,EAAE,eAAe;oCACjB,oBAAoB;gCACtB;gCACA,WAAU;;;;;;0CAGd,8OAAC;gCAAG,WAAU;0CAAwC,YAAY,IAAI;;;;;;;;;;;;oBAGvE,eAAe,CAAC,iCACf,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS,CAAC;oCACR,EAAE,eAAe;oCACjB,SAAS;gCACX;gCACA,WAAU;gCACV,OAAM;0CAEN,cAAA,8OAAC,2MAAA,CAAA,OAAI;oCAAC,WAAU;;;;;;;;;;;0CAElB,8OAAC;gCACC,SAAS,CAAC;oCACR,EAAE,eAAe;oCACjB,IAAI,QAAQ,sDAAsD;wCAChE,WAAW,YAAY,GAAG;oCAC5B;gCACF;gCACA,WAAU;gCACV,OAAM;0CAEN,cAAA,8OAAC,0MAAA,CAAA,SAAM;oCAAC,WAAU;;;;;;;;;;;0CAEpB,8OAAC;gCAAO,WAAU;0CAChB,cAAA,8OAAC,gNAAA,CAAA,iBAAc;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAOlC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAK,WAAW,CAAC,oEAAoE,EAAE,gBAAgB;8BACrG,YAAY,SAAS,CAAC,WAAW,GAAG,OAAO,CAAC,KAAK;;;;;;;;;;;0BAKtD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,kMAAA,CAAA,OAAI;gCAAC,WAAU;;;;;;0CAChB,8OAAC;gCAAK,WAAU;;oCAAc;oCAAE,YAAY,KAAK,CAAC,cAAc;;;;;;;;;;;;;kCAElE,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAK,WAAU;;gCAAe,YAAY,WAAW,IAAI;gCAAE;;;;;;;;;;;;;;;;;;0BAKhE,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,0MAAA,CAAA,WAAQ;wCAAC,WAAU;;;;;;kDACpB,8OAAC;kDAAM,CAAA,GAAA,qJAAA,CAAA,SAAM,AAAD,EAAE,IAAI,KAAK,YAAY,SAAS,GAAG;;;;;;;;;;;;4BAEhD,iCACC,8OAAC;gCAAI,WAAU;gCAAoB,OAAO,CAAC,mBAAmB,EAAE,yBAAyB,MAAM,CAAC,gCAAgC,CAAC;;kDAC/H,8OAAC,wNAAA,CAAA,gBAAa;wCAAC,WAAU;;;;;;kDACzB,8OAAC;wCAAK,WAAU;kDAAgC,yBAAyB,MAAM;;;;;;;;;;;;;;;;;;kCAMrF,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,oMAAA,CAAA,QAAK;gCAAC,WAAU;;;;;;0CACjB,8OAAC;;oCAAM,YAAY,UAAU;oCAAC;;;;;;;;;;;;;oBAI/B,YAAY,iBAAiB,kBAC5B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,0MAAA,CAAA,SAAM;gCAAC,WAAU;;;;;;0CAClB,8OAAC;gCAAK,WAAU;0CAAY,YAAY,iBAAiB;;;;;;;;;;;;oBAK5D,YAAY,iBAAiB,kBAC5B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,oMAAA,CAAA,QAAK;gCAAC,WAAU;;;;;;0CACjB,8OAAC;;oCAAK;oCAAQ,CAAA,GAAA,qJAAA,CAAA,SAAM,AAAD,EAAE,IAAI,KAAK,YAAY,iBAAiB,GAAG;;;;;;;;;;;;;;;;;;;YAMnE,YAAY,WAAW,kBACtB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAE,WAAU;8BAAsC,YAAY,WAAW;;;;;;;;;;;0BAK9E,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;4BAAwB;4BAC5B,CAAA,GAAA,qJAAA,CAAA,SAAM,AAAD,EAAE,IAAI,KAAK,YAAY,SAAS,GAAG;;;;;;;oBAGlD,YAAY,UAAU,kBACrB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,kMAAA,CAAA,OAAI;gCAAC,WAAU;;;;;;0CAChB,8OAAC;0CAAK;;;;;;;;;;;;;;;;;;;;;;;;AAMlB","debugId":null}},
    {"offset": {"line": 479, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnebraeckman/Documents/GitHub/eventRunner/src/components/features/opportunities/KanbanColumn.tsx"],"sourcesContent":["\"use client\";\n\nimport { useDroppable } from \"@dnd-kit/core\";\nimport { SortableContext, verticalListSortingStrategy } from \"@dnd-kit/sortable\";\nimport { OpportunityCard } from \"./OpportunityCard\";\nimport type { Opportunity, OpportunityStage } from \"~/lib/types/opportunity\";\n\ninterface KanbanColumnProps {\n  id: OpportunityStage;\n  title: string;\n  color: string;\n  opportunities: Opportunity[];\n  allOpportunities?: Opportunity[];\n  onEditOpportunity?: (opportunity: Opportunity) => void;\n  onDeleteOpportunity?: (opportunityId: string) => void;\n  selectedOpportunities?: Opportunity[];\n  onToggleSelection?: (opportunity: Opportunity) => void;\n  isSelectionMode?: boolean;\n}\n\nexport function KanbanColumn({ \n  id, \n  title, \n  color, \n  opportunities, \n  allOpportunities = [],\n  onEditOpportunity, \n  onDeleteOpportunity,\n  selectedOpportunities = [],\n  onToggleSelection,\n  isSelectionMode = false\n}: KanbanColumnProps) {\n  const { setNodeRef, isOver } = useDroppable({\n    id,\n  });\n\n  const totalValue = opportunities.reduce((sum, opp) => sum + opp.value, 0);\n  const count = opportunities.length;\n\n  return (\n    <div\n      ref={setNodeRef}\n      className={`\n        flex flex-col rounded-lg border-2 border-dashed p-4 min-h-[500px]\n        ${color}\n        ${isOver ? 'border-blue-500 bg-blue-50' : ''}\n        transition-colors duration-200\n      `}\n    >\n      <div className=\"mb-4\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h3 className=\"font-semibold text-gray-900\">{title}</h3>\n          <span className=\"bg-white rounded-full px-2 py-1 text-xs font-medium text-gray-600\">\n            {count}\n          </span>\n        </div>\n        <div className=\"text-sm text-gray-600\">\n          €{totalValue.toLocaleString()}\n        </div>\n      </div>\n\n      <SortableContext\n        items={opportunities.map(opp => opp._id)}\n        strategy={verticalListSortingStrategy}\n      >\n        <div className=\"space-y-3 flex-1\">\n          {opportunities.map((opportunity) => (\n            <OpportunityCard\n              key={opportunity._id}\n              opportunity={opportunity}\n              allOpportunities={allOpportunities}\n              onEdit={onEditOpportunity}\n              onDelete={onDeleteOpportunity}\n              isSelected={selectedOpportunities.some(selected => selected._id === opportunity._id)}\n              onToggleSelection={onToggleSelection}\n              isSelectionMode={isSelectionMode}\n            />\n          ))}\n        </div>\n      </SortableContext>\n\n      {count === 0 && (\n        <div className=\"flex-1 flex items-center justify-center text-gray-400\">\n          <p className=\"text-sm\">Drop opportunities here</p>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAoBO,SAAS,aAAa,EAC3B,EAAE,EACF,KAAK,EACL,KAAK,EACL,aAAa,EACb,mBAAmB,EAAE,EACrB,iBAAiB,EACjB,mBAAmB,EACnB,wBAAwB,EAAE,EAC1B,iBAAiB,EACjB,kBAAkB,KAAK,EACL;IAClB,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,2JAAA,CAAA,eAAY,AAAD,EAAE;QAC1C;IACF;IAEA,MAAM,aAAa,cAAc,MAAM,CAAC,CAAC,KAAK,MAAQ,MAAM,IAAI,KAAK,EAAE;IACvE,MAAM,QAAQ,cAAc,MAAM;IAElC,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,CAAC;;QAEV,EAAE,MAAM;QACR,EAAE,SAAS,+BAA+B,GAAG;;MAE/C,CAAC;;0BAED,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAA+B;;;;;;0CAC7C,8OAAC;gCAAK,WAAU;0CACb;;;;;;;;;;;;kCAGL,8OAAC;wBAAI,WAAU;;4BAAwB;4BACnC,WAAW,cAAc;;;;;;;;;;;;;0BAI/B,8OAAC,mKAAA,CAAA,kBAAe;gBACd,OAAO,cAAc,GAAG,CAAC,CAAA,MAAO,IAAI,GAAG;gBACvC,UAAU,mKAAA,CAAA,8BAA2B;0BAErC,cAAA,8OAAC;oBAAI,WAAU;8BACZ,cAAc,GAAG,CAAC,CAAC,4BAClB,8OAAC,kKAAA,CAAA,kBAAe;4BAEd,aAAa;4BACb,kBAAkB;4BAClB,QAAQ;4BACR,UAAU;4BACV,YAAY,sBAAsB,IAAI,CAAC,CAAA,WAAY,SAAS,GAAG,KAAK,YAAY,GAAG;4BACnF,mBAAmB;4BACnB,iBAAiB;2BAPZ,YAAY,GAAG;;;;;;;;;;;;;;;YAa3B,UAAU,mBACT,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAE,WAAU;8BAAU;;;;;;;;;;;;;;;;;AAKjC","debugId":null}},
    {"offset": {"line": 605, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnebraeckman/Documents/GitHub/eventRunner/src/components/features/opportunities/KanbanBoard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport {\n  DndContext,\n  type DragEndEvent,\n  DragOverlay,\n  type DragStartEvent,\n  PointerSensor,\n  useSensor,\n  useSensors,\n} from \"@dnd-kit/core\";\nimport { arrayMove, SortableContext } from \"@dnd-kit/sortable\";\nimport { KanbanColumn } from \"./KanbanColumn\";\nimport { OpportunityCard } from \"./OpportunityCard\";\nimport type { Opportunity, OpportunityStage } from \"~/lib/types/opportunity\";\nimport { useMutation } from \"convex/react\";\nimport { api } from \"../../../../convex/_generated/api\";\n\ninterface KanbanBoardProps {\n  opportunities: Opportunity[];\n  onEditOpportunity?: (opportunity: Opportunity) => void;\n  onDeleteOpportunity?: (opportunityId: string) => void;\n  selectedOpportunities?: Opportunity[];\n  onToggleSelection?: (opportunity: Opportunity) => void;\n  isSelectionMode?: boolean;\n}\n\nconst PIPELINE_STAGES: { id: OpportunityStage; title: string; color: string }[] = [\n  { id: \"PROSPECT\", title: \"Prospect\", color: \"bg-gray-100 border-gray-300\" },\n  { id: \"QUALIFIED\", title: \"Qualified\", color: \"bg-blue-100 border-blue-300\" },\n  { id: \"PROPOSAL\", title: \"Proposal\", color: \"bg-yellow-100 border-yellow-300\" },\n  { id: \"NEGOTIATION\", title: \"Negotiation\", color: \"bg-orange-100 border-orange-300\" },\n  { id: \"CLOSED_WON\", title: \"Closed Won\", color: \"bg-green-100 border-green-300\" },\n  { id: \"CLOSED_LOST\", title: \"Closed Lost\", color: \"bg-red-100 border-red-300\" },\n];\n\nexport function KanbanBoard({ \n  opportunities, \n  onEditOpportunity, \n  onDeleteOpportunity, \n  selectedOpportunities = [], \n  onToggleSelection, \n  isSelectionMode = false \n}: KanbanBoardProps) {\n  const [activeId, setActiveId] = useState<string | null>(null);\n  const updateOpportunityStage = useMutation(api.opportunities.updateOpportunityStage);\n\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: {\n        distance: 8,\n      },\n    })\n  );\n\n  const groupedOpportunities = PIPELINE_STAGES.reduce((acc, stage) => {\n    acc[stage.id] = opportunities.filter(opp => opp.stage === stage.id);\n    return acc;\n  }, {} as Record<OpportunityStage, Opportunity[]>);\n\n  const handleDragStart = (event: DragStartEvent) => {\n    setActiveId(event.active.id as string);\n  };\n\n  const handleDragEnd = async (event: DragEndEvent) => {\n    const { active, over } = event;\n    setActiveId(null);\n\n    if (!over) return;\n\n    const activeOpportunity = opportunities.find(opp => opp._id === active.id);\n    const newStage = over.id as OpportunityStage;\n\n    // Ensure we're dropping on a valid stage column, not on another opportunity\n    const validStageIds = PIPELINE_STAGES.map(stage => stage.id);\n    if (!validStageIds.includes(newStage)) {\n      console.warn(\"Invalid drop target:\", over.id);\n      return;\n    }\n\n    if (activeOpportunity && activeOpportunity.stage !== newStage) {\n      try {\n        console.log(\"Updating opportunity stage:\", {\n          opportunityId: activeOpportunity._id,\n          currentStage: activeOpportunity.stage,\n          newStage,\n          overId: over.id\n        });\n        \n        await updateOpportunityStage({\n          opportunityId: activeOpportunity._id,\n          stage: newStage,\n        });\n      } catch (error) {\n        console.error(\"Failed to update opportunity stage:\", error);\n      }\n    }\n  };\n\n  const activeOpportunity = activeId \n    ? opportunities.find(opp => opp._id === activeId)\n    : null;\n\n  return (\n    <DndContext\n      sensors={sensors}\n      onDragStart={handleDragStart}\n      onDragEnd={handleDragEnd}\n    >\n      <div className=\"grid grid-cols-1 lg:grid-cols-6 gap-6 min-h-[600px]\">\n        {PIPELINE_STAGES.map((stage) => (\n          <KanbanColumn\n            key={stage.id}\n            id={stage.id}\n            title={stage.title}\n            color={stage.color}\n            opportunities={groupedOpportunities[stage.id] || []}\n            allOpportunities={opportunities}\n            onEditOpportunity={onEditOpportunity}\n            onDeleteOpportunity={onDeleteOpportunity}\n            selectedOpportunities={selectedOpportunities}\n            onToggleSelection={onToggleSelection}\n            isSelectionMode={isSelectionMode}\n          />\n        ))}\n      </div>\n\n      <DragOverlay>\n        {activeOpportunity ? (\n          <OpportunityCard \n            opportunity={activeOpportunity} \n            isDragging \n          />\n        ) : null}\n      </DragOverlay>\n    </DndContext>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 754, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnebraeckman/Documents/GitHub/eventRunner/src/components/features/opportunities/OpportunityFilters.tsx"],"sourcesContent":["\"use client\";\n\nimport { Search, Filter } from \"lucide-react\";\nimport type { OpportunityStage, EventType } from \"~/lib/types/opportunity\";\n\ninterface OpportunityFilterState {\n  stage?: OpportunityStage;\n  eventType?: EventType;\n  searchTerm?: string;\n}\n\ninterface OpportunityFiltersProps {\n  filters: OpportunityFilterState;\n  onFilterChange: (filters: OpportunityFilterState) => void;\n}\n\nconst STAGE_OPTIONS: { value: OpportunityStage; label: string }[] = [\n  { value: \"PROSPECT\", label: \"Prospect\" },\n  { value: \"QUALIFIED\", label: \"Qualified\" },\n  { value: \"PROPOSAL\", label: \"Proposal\" },\n  { value: \"NEGOTIATION\", label: \"Negotiation\" },\n  { value: \"CLOSED_WON\", label: \"Closed Won\" },\n  { value: \"CLOSED_LOST\", label: \"Closed Lost\" },\n];\n\nconst EVENT_TYPE_OPTIONS: { value: EventType; label: string }[] = [\n  { value: \"WEDDING\", label: \"Wedding\" },\n  { value: \"CORPORATE\", label: \"Corporate\" },\n  { value: \"GALA\", label: \"Gala\" },\n  { value: \"CONFERENCE\", label: \"Conference\" },\n  { value: \"BIRTHDAY\", label: \"Birthday\" },\n  { value: \"ANNIVERSARY\", label: \"Anniversary\" },\n  { value: \"OTHER\", label: \"Other\" },\n];\n\nexport function OpportunityFilters({ filters, onFilterChange }: OpportunityFiltersProps) {\n  const updateFilter = (key: keyof OpportunityFilterState, value: string | undefined) => {\n    onFilterChange({\n      ...filters,\n      [key]: value || undefined,\n    });\n  };\n\n  const clearFilters = () => {\n    onFilterChange({});\n  };\n\n  const hasActiveFilters = Object.values(filters).some(value => value);\n\n  return (\n    <div className=\"bg-white rounded-lg shadow p-6\">\n      <div className=\"flex items-center gap-4 mb-4\">\n        <Filter className=\"w-5 h-5 text-gray-500\" />\n        <h2 className=\"text-lg font-medium text-gray-900\">Filters</h2>\n        {hasActiveFilters && (\n          <button\n            onClick={clearFilters}\n            className=\"text-sm text-blue-600 hover:text-blue-700\"\n          >\n            Clear all\n          </button>\n        )}\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        {/* Search */}\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n          <input\n            type=\"text\"\n            placeholder=\"Search opportunities...\"\n            value={filters.searchTerm || \"\"}\n            onChange={(e) => updateFilter(\"searchTerm\", e.target.value)}\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          />\n        </div>\n\n        {/* Stage Filter */}\n        <select\n          value={filters.stage || \"\"}\n          onChange={(e) => updateFilter(\"stage\", e.target.value)}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n        >\n          <option value=\"\">All stages</option>\n          {STAGE_OPTIONS.map((option) => (\n            <option key={option.value} value={option.value}>\n              {option.label}\n            </option>\n          ))}\n        </select>\n\n        {/* Event Type Filter */}\n        <select\n          value={filters.eventType || \"\"}\n          onChange={(e) => updateFilter(\"eventType\", e.target.value)}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n        >\n          <option value=\"\">All event types</option>\n          {EVENT_TYPE_OPTIONS.map((option) => (\n            <option key={option.value} value={option.value}>\n              {option.label}\n            </option>\n          ))}\n        </select>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AAAA;AAFA;;;AAgBA,MAAM,gBAA8D;IAClE;QAAE,OAAO;QAAY,OAAO;IAAW;IACvC;QAAE,OAAO;QAAa,OAAO;IAAY;IACzC;QAAE,OAAO;QAAY,OAAO;IAAW;IACvC;QAAE,OAAO;QAAe,OAAO;IAAc;IAC7C;QAAE,OAAO;QAAc,OAAO;IAAa;IAC3C;QAAE,OAAO;QAAe,OAAO;IAAc;CAC9C;AAED,MAAM,qBAA4D;IAChE;QAAE,OAAO;QAAW,OAAO;IAAU;IACrC;QAAE,OAAO;QAAa,OAAO;IAAY;IACzC;QAAE,OAAO;QAAQ,OAAO;IAAO;IAC/B;QAAE,OAAO;QAAc,OAAO;IAAa;IAC3C;QAAE,OAAO;QAAY,OAAO;IAAW;IACvC;QAAE,OAAO;QAAe,OAAO;IAAc;IAC7C;QAAE,OAAO;QAAS,OAAO;IAAQ;CAClC;AAEM,SAAS,mBAAmB,EAAE,OAAO,EAAE,cAAc,EAA2B;IACrF,MAAM,eAAe,CAAC,KAAmC;QACvD,eAAe;YACb,GAAG,OAAO;YACV,CAAC,IAAI,EAAE,SAAS;QAClB;IACF;IAEA,MAAM,eAAe;QACnB,eAAe,CAAC;IAClB;IAEA,MAAM,mBAAmB,OAAO,MAAM,CAAC,SAAS,IAAI,CAAC,CAAA,QAAS;IAE9D,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,sMAAA,CAAA,SAAM;wBAAC,WAAU;;;;;;kCAClB,8OAAC;wBAAG,WAAU;kCAAoC;;;;;;oBACjD,kCACC,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;0BAML,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,sMAAA,CAAA,SAAM;gCAAC,WAAU;;;;;;0CAClB,8OAAC;gCACC,MAAK;gCACL,aAAY;gCACZ,OAAO,QAAQ,UAAU,IAAI;gCAC7B,UAAU,CAAC,IAAM,aAAa,cAAc,EAAE,MAAM,CAAC,KAAK;gCAC1D,WAAU;;;;;;;;;;;;kCAKd,8OAAC;wBACC,OAAO,QAAQ,KAAK,IAAI;wBACxB,UAAU,CAAC,IAAM,aAAa,SAAS,EAAE,MAAM,CAAC,KAAK;wBACrD,WAAU;;0CAEV,8OAAC;gCAAO,OAAM;0CAAG;;;;;;4BAChB,cAAc,GAAG,CAAC,CAAC,uBAClB,8OAAC;oCAA0B,OAAO,OAAO,KAAK;8CAC3C,OAAO,KAAK;mCADF,OAAO,KAAK;;;;;;;;;;;kCAO7B,8OAAC;wBACC,OAAO,QAAQ,SAAS,IAAI;wBAC5B,UAAU,CAAC,IAAM,aAAa,aAAa,EAAE,MAAM,CAAC,KAAK;wBACzD,WAAU;;0CAEV,8OAAC;gCAAO,OAAM;0CAAG;;;;;;4BAChB,mBAAmB,GAAG,CAAC,CAAC,uBACvB,8OAAC;oCAA0B,OAAO,OAAO,KAAK;8CAC3C,OAAO,KAAK;mCADF,OAAO,KAAK;;;;;;;;;;;;;;;;;;;;;;;AAQrC","debugId":null}},
    {"offset": {"line": 967, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnebraeckman/Documents/GitHub/eventRunner/src/components/features/opportunities/OpportunityForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useMutation, useQuery } from \"convex/react\";\nimport { api } from \"../../../../convex/_generated/api\";\nimport { X, Calendar, Users, Euro, MapPin, Clock, FileText } from \"lucide-react\";\nimport type { Id } from \"../../../../convex/_generated/dataModel\";\nimport type { OpportunityStage, EventType } from \"~/lib/types/opportunity\";\n\ninterface OpportunityFormData {\n  name: string;\n  contactId: Id<\"contacts\">;\n  stage: OpportunityStage;\n  value: number;\n  eventType: EventType;\n  eventDate: string;\n  guestCount: number;\n  requiresCatering: boolean;\n  venueRequirements?: string;\n  description?: string;\n  expectedCloseDate?: string;\n}\n\ninterface OpportunityFormProps {\n  isOpen: boolean;\n  onClose: () => void;\n  initialData?: Partial<OpportunityFormData>;\n  opportunityId?: Id<\"opportunities\">;\n}\n\nconst STAGE_OPTIONS: { value: OpportunityStage; label: string }[] = [\n  { value: \"PROSPECT\", label: \"Prospect\" },\n  { value: \"QUALIFIED\", label: \"Qualified\" },\n  { value: \"PROPOSAL\", label: \"Proposal\" },\n  { value: \"NEGOTIATION\", label: \"Negotiation\" },\n  { value: \"CLOSED_WON\", label: \"Closed Won\" },\n  { value: \"CLOSED_LOST\", label: \"Closed Lost\" },\n];\n\nconst EVENT_TYPE_OPTIONS: { value: EventType; label: string }[] = [\n  { value: \"WEDDING\", label: \"Wedding\" },\n  { value: \"CORPORATE\", label: \"Corporate Event\" },\n  { value: \"GALA\", label: \"Gala\" },\n  { value: \"CONFERENCE\", label: \"Conference\" },\n  { value: \"BIRTHDAY\", label: \"Birthday Party\" },\n  { value: \"ANNIVERSARY\", label: \"Anniversary\" },\n  { value: \"OTHER\", label: \"Other\" },\n];\n\nexport function OpportunityForm({ \n  isOpen, \n  onClose, \n  initialData, \n  opportunityId \n}: OpportunityFormProps) {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  \n  const contacts = useQuery(api.contacts.getAllContacts, {});\n  const createOpportunity = useMutation(api.opportunities.createOpportunity);\n  const updateOpportunity = useMutation(api.opportunities.updateOpportunity);\n\n  const { register, handleSubmit, formState: { errors }, reset, watch } = useForm<OpportunityFormData>({\n    defaultValues: {\n      stage: \"PROSPECT\",\n      eventType: \"WEDDING\",\n      requiresCatering: false,\n      ...initialData,\n    },\n  });\n\n  const isEditing = !!opportunityId;\n\n  const onSubmit = async (data: OpportunityFormData) => {\n    setIsSubmitting(true);\n    try {\n      const formattedData = {\n        ...data,\n        eventDate: new Date(data.eventDate).getTime(),\n        expectedCloseDate: data.expectedCloseDate \n          ? new Date(data.expectedCloseDate).getTime() \n          : undefined,\n      };\n\n      if (isEditing && opportunityId) {\n        await updateOpportunity({\n          opportunityId,\n          ...formattedData,\n        });\n      } else {\n        await createOpportunity(formattedData);\n      }\n\n      reset();\n      onClose();\n    } catch (error) {\n      console.error(\"Error saving opportunity:\", error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const eventType = watch(\"eventType\");\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">\n            {isEditing ? \"Edit Opportunity\" : \"Create New Opportunity\"}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-500\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* Form */}\n        <form onSubmit={handleSubmit(onSubmit)} className=\"p-6 space-y-6\">\n          {/* Basic Information */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Opportunity Name */}\n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <FileText className=\"w-4 h-4 inline mr-1\" />\n                Opportunity Name *\n              </label>\n              <input\n                type=\"text\"\n                {...register(\"name\", { required: \"Opportunity name is required\" })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                placeholder=\"Enter opportunity name...\"\n              />\n              {errors.name && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.name.message}</p>\n              )}\n            </div>\n\n            {/* Contact */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Contact *\n              </label>\n              <select\n                {...register(\"contactId\", { required: \"Contact is required\" })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              >\n                <option value=\"\">Select a contact...</option>\n                {contacts?.map((contact) => (\n                  <option key={contact._id} value={contact._id}>\n                    {contact.name} ({contact.email})\n                  </option>\n                ))}\n              </select>\n              {errors.contactId && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.contactId.message}</p>\n              )}\n            </div>\n\n            {/* Stage */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Pipeline Stage *\n              </label>\n              <select\n                {...register(\"stage\", { required: \"Stage is required\" })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              >\n                {STAGE_OPTIONS.map((option) => (\n                  <option key={option.value} value={option.value}>\n                    {option.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Event Type */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Event Type *\n              </label>\n              <select\n                {...register(\"eventType\", { required: \"Event type is required\" })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              >\n                {EVENT_TYPE_OPTIONS.map((option) => (\n                  <option key={option.value} value={option.value}>\n                    {option.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Opportunity Value */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <Euro className=\"w-4 h-4 inline mr-1\" />\n                Opportunity Value *\n              </label>\n              <input\n                type=\"number\"\n                min=\"0\"\n                step=\"0.01\"\n                {...register(\"value\", { \n                  required: \"Value is required\",\n                  min: { value: 0, message: \"Value must be positive\" },\n                  valueAsNumber: true\n                })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                placeholder=\"0.00\"\n              />\n              {errors.value && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.value.message}</p>\n              )}\n            </div>\n          </div>\n\n          {/* Event Details */}\n          <div className=\"border-t border-gray-200 pt-6\">\n            <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Event Details</h3>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {/* Event Date */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  <Calendar className=\"w-4 h-4 inline mr-1\" />\n                  Event Date *\n                </label>\n                <input\n                  type=\"date\"\n                  {...register(\"eventDate\", { required: \"Event date is required\" })}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                />\n                {errors.eventDate && (\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.eventDate.message}</p>\n                )}\n              </div>\n\n              {/* Expected Close Date */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  <Clock className=\"w-4 h-4 inline mr-1\" />\n                  Expected Close Date\n                </label>\n                <input\n                  type=\"date\"\n                  {...register(\"expectedCloseDate\")}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                />\n              </div>\n\n              {/* Guest Count */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  <Users className=\"w-4 h-4 inline mr-1\" />\n                  Guest Count *\n                </label>\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  {...register(\"guestCount\", { \n                    required: \"Guest count is required\",\n                    min: { value: 1, message: \"Must have at least 1 guest\" },\n                    valueAsNumber: true\n                  })}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"100\"\n                />\n                {errors.guestCount && (\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.guestCount.message}</p>\n                )}\n              </div>\n\n              {/* Catering */}\n              <div className=\"flex items-center mt-6\">\n                <input\n                  type=\"checkbox\"\n                  {...register(\"requiresCatering\")}\n                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                />\n                <label className=\"ml-2 text-sm text-gray-700\">\n                  Requires catering\n                </label>\n              </div>\n            </div>\n\n            {/* Venue Requirements */}\n            <div className=\"mt-6\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <MapPin className=\"w-4 h-4 inline mr-1\" />\n                Venue Requirements\n              </label>\n              <textarea\n                rows={3}\n                {...register(\"venueRequirements\")}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                placeholder=\"Describe venue requirements, location preferences, etc...\"\n              />\n            </div>\n\n            {/* Description */}\n            <div className=\"mt-6\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Description\n              </label>\n              <textarea\n                rows={4}\n                {...register(\"description\")}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                placeholder=\"Additional notes about this opportunity...\"\n              />\n            </div>\n          </div>\n\n          {/* Form Actions */}\n          <div className=\"flex justify-end space-x-3 pt-6 border-t border-gray-200\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={isSubmitting}\n              className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isSubmitting \n                ? (isEditing ? \"Updating...\" : \"Creating...\") \n                : (isEditing ? \"Update Opportunity\" : \"Create Opportunity\")\n              }\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1654, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnebraeckman/Documents/GitHub/eventRunner/src/components/features/opportunities/BulkOperations.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useMutation } from \"convex/react\";\nimport { Check, X, Trash2, UserPlus, ArrowRight } from \"lucide-react\";\nimport { api } from \"../../../../convex/_generated/api\";\nimport type { Id } from \"../../../../convex/_generated/dataModel\";\nimport type { Opportunity, OpportunityStage } from \"~/lib/types/opportunity\";\n\ninterface BulkOperationsProps {\n  selectedOpportunities: Opportunity[];\n  onClearSelection: () => void;\n  onBulkComplete: () => void;\n}\n\nconst STAGE_OPTIONS: { value: OpportunityStage; label: string }[] = [\n  { value: \"PROSPECT\", label: \"Prospect\" },\n  { value: \"QUALIFIED\", label: \"Qualified\" },\n  { value: \"PROPOSAL\", label: \"Proposal\" },\n  { value: \"NEGOTIATION\", label: \"Negotiation\" },\n  { value: \"CLOSED_WON\", label: \"Closed Won\" },\n  { value: \"CLOSED_LOST\", label: \"Closed Lost\" },\n];\n\nexport function BulkOperations({ \n  selectedOpportunities, \n  onClearSelection, \n  onBulkComplete \n}: BulkOperationsProps) {\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [operation, setOperation] = useState<\"stage\" | \"delete\" | \"assign\" | null>(null);\n  const [targetStage, setTargetStage] = useState<OpportunityStage>(\"QUALIFIED\");\n  \n  const updateOpportunityStage = useMutation(api.opportunities.updateOpportunityStage);\n  const deleteOpportunity = useMutation(api.opportunities.deleteOpportunity);\n\n  const handleBulkStageUpdate = async () => {\n    setIsProcessing(true);\n    try {\n      await Promise.all(\n        selectedOpportunities.map(opp => \n          updateOpportunityStage({\n            opportunityId: opp._id,\n            stage: targetStage,\n          })\n        )\n      );\n      onBulkComplete();\n    } catch (error) {\n      console.error(\"Error updating opportunities:\", error);\n    } finally {\n      setIsProcessing(false);\n      setOperation(null);\n    }\n  };\n\n  const handleBulkDelete = async () => {\n    if (!confirm(`Are you sure you want to delete ${selectedOpportunities.length} opportunities?`)) {\n      return;\n    }\n    \n    setIsProcessing(true);\n    try {\n      await Promise.all(\n        selectedOpportunities.map(opp => \n          deleteOpportunity({ opportunityId: opp._id })\n        )\n      );\n      onBulkComplete();\n    } catch (error) {\n      console.error(\"Error deleting opportunities:\", error);\n    } finally {\n      setIsProcessing(false);\n      setOperation(null);\n    }\n  };\n\n  if (selectedOpportunities.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-40\">\n      <div className=\"container mx-auto px-4 py-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"flex items-center space-x-2\">\n              <Check className=\"w-5 h-5 text-blue-600\" />\n              <span className=\"font-medium text-gray-900\">\n                {selectedOpportunities.length} opportunities selected\n              </span>\n            </div>\n            \n            <div className=\"text-sm text-gray-600\">\n              Total value: €{selectedOpportunities.reduce((sum, opp) => sum + opp.value, 0).toLocaleString()}\n            </div>\n          </div>\n\n          <div className=\"flex items-center space-x-2\">\n            {operation === null && (\n              <>\n                <button\n                  onClick={() => setOperation(\"stage\")}\n                  className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded text-gray-700 bg-white hover:bg-gray-50\"\n                >\n                  <ArrowRight className=\"w-4 h-4 mr-1\" />\n                  Move to Stage\n                </button>\n                \n                <button\n                  onClick={() => setOperation(\"delete\")}\n                  className=\"inline-flex items-center px-3 py-1.5 border border-red-300 text-sm font-medium rounded text-red-700 bg-white hover:bg-red-50\"\n                >\n                  <Trash2 className=\"w-4 h-4 mr-1\" />\n                  Delete\n                </button>\n              </>\n            )}\n\n            {operation === \"stage\" && (\n              <div className=\"flex items-center space-x-2\">\n                <select\n                  value={targetStage}\n                  onChange={(e) => setTargetStage(e.target.value as OpportunityStage)}\n                  className=\"px-2 py-1 border border-gray-300 rounded text-sm\"\n                >\n                  {STAGE_OPTIONS.map((option) => (\n                    <option key={option.value} value={option.value}>\n                      {option.label}\n                    </option>\n                  ))}\n                </select>\n                \n                <button\n                  onClick={handleBulkStageUpdate}\n                  disabled={isProcessing}\n                  className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50\"\n                >\n                  {isProcessing ? \"Processing...\" : \"Update\"}\n                </button>\n                \n                <button\n                  onClick={() => setOperation(null)}\n                  className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded text-gray-700 bg-white hover:bg-gray-50\"\n                >\n                  Cancel\n                </button>\n              </div>\n            )}\n\n            {operation === \"delete\" && (\n              <div className=\"flex items-center space-x-2\">\n                <button\n                  onClick={handleBulkDelete}\n                  disabled={isProcessing}\n                  className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50\"\n                >\n                  {isProcessing ? \"Deleting...\" : \"Confirm Delete\"}\n                </button>\n                \n                <button\n                  onClick={() => setOperation(null)}\n                  className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded text-gray-700 bg-white hover:bg-gray-50\"\n                >\n                  Cancel\n                </button>\n              </div>\n            )}\n            \n            <button\n              onClick={onClearSelection}\n              className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded text-gray-700 bg-white hover:bg-gray-50\"\n            >\n              <X className=\"w-4 h-4 mr-1\" />\n              Clear Selection\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1954, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnebraeckman/Documents/GitHub/eventRunner/src/components/features/opportunities/OpportunityPipeline.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useQuery, useMutation } from \"convex/react\";\nimport { Plus } from \"lucide-react\";\nimport { api } from \"../../../../convex/_generated/api\";\nimport { KanbanBoard } from \"./KanbanBoard\";\nimport { OpportunityFilters } from \"./OpportunityFilters\";\nimport { OpportunityForm } from \"./OpportunityForm\";\nimport { BulkOperations } from \"./BulkOperations\";\nimport type { OpportunityStage, Opportunity, EventType } from \"~/lib/types/opportunity\";\nimport type { Id } from \"../../../../convex/_generated/dataModel\";\n\ninterface OpportunityFilterState {\n  stage?: OpportunityStage;\n  eventType?: EventType;\n  searchTerm?: string;\n}\n\nexport function OpportunityPipeline() {\n  const [filters, setFilters] = useState<OpportunityFilterState>({});\n  const [showCreateForm, setShowCreateForm] = useState(false);\n  const [editingOpportunity, setEditingOpportunity] = useState<Opportunity | null>(null);\n  const [selectedOpportunities, setSelectedOpportunities] = useState<Opportunity[]>([]);\n  const [isSelectionMode, setIsSelectionMode] = useState(false);\n  \n  const opportunities = useQuery(api.opportunities.getAllOpportunities, filters);\n  const deleteOpportunity = useMutation(api.opportunities.deleteOpportunity);\n\n  const handleFilterChange = (newFilters: OpportunityFilterState) => {\n    setFilters(newFilters);\n  };\n\n  const handleEditOpportunity = (opportunity: Opportunity) => {\n    setEditingOpportunity(opportunity);\n  };\n\n  const handleDeleteOpportunity = async (opportunityId: string) => {\n    try {\n      await deleteOpportunity({ opportunityId: opportunityId as Id<\"opportunities\"> });\n    } catch (error) {\n      console.error(\"Error deleting opportunity:\", error);\n    }\n  };\n\n  const handleCloseForm = () => {\n    setShowCreateForm(false);\n    setEditingOpportunity(null);\n  };\n\n  const handleToggleSelection = (opportunity: Opportunity) => {\n    setSelectedOpportunities(prev => {\n      const isSelected = prev.some(opp => opp._id === opportunity._id);\n      if (isSelected) {\n        return prev.filter(opp => opp._id !== opportunity._id);\n      } else {\n        return [...prev, opportunity];\n      }\n    });\n  };\n\n  const handleClearSelection = () => {\n    setSelectedOpportunities([]);\n    setIsSelectionMode(false);\n  };\n\n  const handleBulkComplete = () => {\n    setSelectedOpportunities([]);\n    setIsSelectionMode(false);\n  };\n\n  const toggleSelectionMode = () => {\n    setIsSelectionMode(!isSelectionMode);\n    if (!isSelectionMode) {\n      setSelectedOpportunities([]);\n    }\n  };\n\n  if (opportunities === undefined) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Actions */}\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-lg font-semibold text-gray-900\">\n            Pipeline Overview\n          </h2>\n          <p className=\"text-sm text-gray-600\">\n            {opportunities.length} opportunities • Total value: €{opportunities.reduce((sum, opp) => sum + opp.value, 0).toLocaleString()}\n          </p>\n        </div>\n        \n        <div className=\"flex items-center space-x-3\">\n          <button\n            onClick={toggleSelectionMode}\n            className={`inline-flex items-center px-3 py-2 border text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${\n              isSelectionMode \n                ? 'border-blue-600 text-blue-600 bg-blue-50 hover:bg-blue-100' \n                : 'border-gray-300 text-gray-700 bg-white hover:bg-gray-50'\n            }`}\n          >\n            {isSelectionMode ? 'Exit Selection' : 'Select Multiple'}\n          </button>\n          \n          <button\n            onClick={() => setShowCreateForm(true)}\n            className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n          >\n            <Plus className=\"w-4 h-4 mr-2\" />\n            New Opportunity\n          </button>\n        </div>\n      </div>\n\n      <OpportunityFilters \n        filters={filters} \n        onFilterChange={handleFilterChange}\n      />\n      \n      <KanbanBoard \n        opportunities={opportunities || []} \n        onEditOpportunity={handleEditOpportunity}\n        onDeleteOpportunity={handleDeleteOpportunity}\n        selectedOpportunities={selectedOpportunities}\n        onToggleSelection={handleToggleSelection}\n        isSelectionMode={isSelectionMode}\n      />\n\n      <OpportunityForm\n        isOpen={showCreateForm || !!editingOpportunity}\n        onClose={handleCloseForm}\n        initialData={editingOpportunity ? {\n          name: editingOpportunity.name,\n          contactId: editingOpportunity.contactId,\n          stage: editingOpportunity.stage,\n          value: editingOpportunity.value,\n          eventType: editingOpportunity.eventType,\n          eventDate: new Date(editingOpportunity.eventDate).toISOString().split('T')[0],\n          guestCount: editingOpportunity.guestCount,\n          requiresCatering: editingOpportunity.requiresCatering,\n          venueRequirements: editingOpportunity.venueRequirements,\n          description: editingOpportunity.description,\n          expectedCloseDate: editingOpportunity.expectedCloseDate \n            ? new Date(editingOpportunity.expectedCloseDate).toISOString().split('T')[0] \n            : undefined,\n        } : undefined}\n        opportunityId={editingOpportunity?._id}\n      />\n\n      <BulkOperations\n        selectedOpportunities={selectedOpportunities}\n        onClearSelection={handleClearSelection}\n        onBulkComplete={handleBulkComplete}\n      />\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2185, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnebraeckman/Documents/GitHub/eventRunner/src/app/opportunities/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { Authenticated, Unauthenticated } from \"convex/react\";\nimport { SignInButton } from \"@clerk/nextjs\";\nimport { OpportunityPipeline } from \"~/components/features/opportunities/OpportunityPipeline\";\nimport { PipelineAnalytics } from \"~/components/features/opportunities/PipelineAnalytics\";\nimport { SalesPerformanceReport } from \"~/components/features/opportunities/SalesPerformanceReport\";\nimport { PipelineHealthIndicators } from \"~/components/features/opportunities/PipelineHealthIndicators\";\nimport { useState } from \"react\";\nimport { \n  BarChart3, \n  Users, \n  Activity, \n  Kanban,\n  TrendingUp\n} from \"lucide-react\";\n\nexport default function OpportunitiesPage() {\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"container mx-auto px-4 py-8\">\n        <Authenticated>\n          <OpportunitiesContent />\n        </Authenticated>\n        \n        <Unauthenticated>\n          <div className=\"text-center\">\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">Access Restricted</h1>\n            <p className=\"text-gray-600 mb-6\">Please sign in to view opportunities.</p>\n            <SignInButton mode=\"modal\">\n              <button className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\">\n                Sign In\n              </button>\n            </SignInButton>\n          </div>\n        </Unauthenticated>\n      </div>\n    </div>\n  );\n}\n\nfunction OpportunitiesContent() {\n  return (\n    <div className=\"space-y-8\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-3xl font-bold text-gray-900\">Sales Pipeline</h1>\n      </div>\n\n      <OpportunityPipeline />\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AAAA;AACA;AACA;AAJA;;;;;AAiBe,SAAS;IACtB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC,8JAAA,CAAA,gBAAa;8BACZ,cAAA,8OAAC;;;;;;;;;;8BAGH,8OAAC,8JAAA,CAAA,kBAAe;8BACd,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAwC;;;;;;0CACtD,8OAAC;gCAAE,WAAU;0CAAqB;;;;;;0CAClC,8OAAC,2KAAA,CAAA,eAAY;gCAAC,MAAK;0CACjB,cAAA,8OAAC;oCAAO,WAAU;8CAAuE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASvG;AAEA,SAAS;IACP,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAG,WAAU;8BAAmC;;;;;;;;;;;0BAGnD,8OAAC,sKAAA,CAAA,sBAAmB;;;;;;;;;;;AAG1B","debugId":null}}]
}