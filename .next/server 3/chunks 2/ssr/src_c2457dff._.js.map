{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnebraeckman/Documents/GitHub/eventRunner/src/components/admin/UserManagement.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from 'react';\nimport { useQuery, useMutation } from \"convex/react\";\nimport { api } from \"../../../convex/_generated/api\";\nimport type { Id } from \"../../../convex/_generated/dataModel\";\nimport { RoleGuard } from \"../auth/RoleGuard\";\n\ntype UserRole = \"ADMIN\" | \"SALES\" | \"PROJECT_MANAGER\" | \"STAFF\" | \"CLIENT\";\n\nconst ROLE_OPTIONS: { value: UserRole; label: string; description: string }[] = [\n  { value: \"ADMIN\", label: \"Admin\", description: \"Full system access\" },\n  { value: \"SALES\", label: \"Sales\", description: \"Contact and lead management\" },\n  { value: \"PROJECT_MANAGER\", label: \"Project Manager\", description: \"Project and team management\" },\n  { value: \"STAFF\", label: \"Staff\", description: \"Basic dashboard access\" },\n  { value: \"CLIENT\", label: \"Client\", description: \"Client portal access only\" },\n];\n\nfunction UserManagementContent() {\n  const users = useQuery(api.users.getAllUsers);\n  const updateUserRole = useMutation(api.users.updateUserRole);\n  const [isUpdating, setIsUpdating] = useState<string | null>(null);\n\n  const handleRoleUpdate = async (userId: string, newRole: UserRole) => {\n    try {\n      setIsUpdating(userId);\n      await updateUserRole({ userId: userId as Id<\"users\">, role: newRole });\n    } catch (error) {\n      console.error(\"Failed to update user role:\", error);\n      alert(\"Failed to update user role. Please try again.\");\n    } finally {\n      setIsUpdating(null);\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow p-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">User Management</h2>\n        \n        {users === undefined ? (\n          <div className=\"text-center py-8\">\n            <div className=\"text-gray-500\">Loading users...</div>\n          </div>\n        ) : users.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <div className=\"text-gray-500\">No users found.</div>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    User\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Email\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Current Role\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {users.map((user) => (\n                  <tr key={user._id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"flex items-center\">\n                        {user.image && (\n                          <img\n                            className=\"h-10 w-10 rounded-full mr-3\"\n                            src={user.image}\n                            alt={user.name || \"User\"}\n                          />\n                        )}\n                        <div>\n                          <div className=\"text-sm font-medium text-gray-900\">\n                            {user.name || \"Anonymous\"}\n                          </div>\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {user.email}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                        user.role === \"ADMIN\" ? \"bg-red-100 text-red-800\" :\n                        user.role === \"SALES\" ? \"bg-blue-100 text-blue-800\" :\n                        user.role === \"PROJECT_MANAGER\" ? \"bg-purple-100 text-purple-800\" :\n                        user.role === \"STAFF\" ? \"bg-green-100 text-green-800\" :\n                        \"bg-gray-100 text-gray-800\"\n                      }`}>\n                        {user.role || \"STAFF\"}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                      <select\n                        value={user.role || \"STAFF\"}\n                        onChange={(e) => handleRoleUpdate(user._id, e.target.value as UserRole)}\n                        disabled={isUpdating === user._id}\n                        className=\"border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50\"\n                      >\n                        {ROLE_OPTIONS.map((option) => (\n                          <option key={option.value} value={option.value}>\n                            {option.label}\n                          </option>\n                        ))}\n                      </select>\n                      {isUpdating === user._id && (\n                        <div className=\"ml-2 inline-block text-gray-500\">\n                          Updating...\n                        </div>\n                      )}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n        \n        <div className=\"mt-6 p-4 bg-blue-50 rounded-md\">\n          <h3 className=\"text-sm font-medium text-blue-900 mb-2\">Role Descriptions</h3>\n          <ul className=\"text-sm text-blue-800 space-y-1\">\n            {ROLE_OPTIONS.map((role) => (\n              <li key={role.value}>\n                <strong>{role.label}:</strong> {role.description}\n              </li>\n            ))}\n          </ul>\n        </div>\n    </div>\n  );\n}\n\nexport function UserManagement() {\n  return (\n    <RoleGuard requiredRole=\"ADMIN\">\n      <UserManagementContent />\n    </RoleGuard>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AACA;AAEA;AANA;;;;;;AAUA,MAAM,eAA0E;IAC9E;QAAE,OAAO;QAAS,OAAO;QAAS,aAAa;IAAqB;IACpE;QAAE,OAAO;QAAS,OAAO;QAAS,aAAa;IAA8B;IAC7E;QAAE,OAAO;QAAmB,OAAO;QAAmB,aAAa;IAA8B;IACjG;QAAE,OAAO;QAAS,OAAO;QAAS,aAAa;IAAyB;IACxE;QAAE,OAAO;QAAU,OAAO;QAAU,aAAa;IAA4B;CAC9E;AAED,SAAS;IACP,MAAM,QAAQ,CAAA,GAAA,wJAAA,CAAA,WAAQ,AAAD,EAAE,2HAAA,CAAA,MAAG,CAAC,KAAK,CAAC,WAAW;IAC5C,MAAM,iBAAiB,CAAA,GAAA,wJAAA,CAAA,cAAW,AAAD,EAAE,2HAAA,CAAA,MAAG,CAAC,KAAK,CAAC,cAAc;IAC3D,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAE5D,MAAM,mBAAmB,OAAO,QAAgB;QAC9C,IAAI;YACF,cAAc;YACd,MAAM,eAAe;gBAAE,QAAQ;gBAAuB,MAAM;YAAQ;QACtE,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,MAAM;QACR,SAAU;YACR,cAAc;QAChB;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;0BAAwC;;;;;;YAErD,UAAU,0BACT,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BAAgB;;;;;;;;;;uBAE/B,MAAM,MAAM,KAAK,kBACnB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BAAgB;;;;;;;;;;qCAGjC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAM,WAAU;;sCACf,8OAAC;4BAAM,WAAU;sCACf,cAAA,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;kDAAiF;;;;;;kDAG/F,8OAAC;wCAAG,WAAU;kDAAiF;;;;;;kDAG/F,8OAAC;wCAAG,WAAU;kDAAiF;;;;;;kDAG/F,8OAAC;wCAAG,WAAU;kDAAiF;;;;;;;;;;;;;;;;;sCAKnG,8OAAC;4BAAM,WAAU;sCACd,MAAM,GAAG,CAAC,CAAC,qBACV,8OAAC;oCAAkB,WAAU;;sDAC3B,8OAAC;4CAAG,WAAU;sDACZ,cAAA,8OAAC;gDAAI,WAAU;;oDACZ,KAAK,KAAK,kBACT,8OAAC;wDACC,WAAU;wDACV,KAAK,KAAK,KAAK;wDACf,KAAK,KAAK,IAAI,IAAI;;;;;;kEAGtB,8OAAC;kEACC,cAAA,8OAAC;4DAAI,WAAU;sEACZ,KAAK,IAAI,IAAI;;;;;;;;;;;;;;;;;;;;;;sDAKtB,8OAAC;4CAAG,WAAU;sDACX,KAAK,KAAK;;;;;;sDAEb,8OAAC;4CAAG,WAAU;sDACZ,cAAA,8OAAC;gDAAK,WAAW,CAAC,yDAAyD,EACzE,KAAK,IAAI,KAAK,UAAU,4BACxB,KAAK,IAAI,KAAK,UAAU,8BACxB,KAAK,IAAI,KAAK,oBAAoB,kCAClC,KAAK,IAAI,KAAK,UAAU,gCACxB,6BACA;0DACC,KAAK,IAAI,IAAI;;;;;;;;;;;sDAGlB,8OAAC;4CAAG,WAAU;;8DACZ,8OAAC;oDACC,OAAO,KAAK,IAAI,IAAI;oDACpB,UAAU,CAAC,IAAM,iBAAiB,KAAK,GAAG,EAAE,EAAE,MAAM,CAAC,KAAK;oDAC1D,UAAU,eAAe,KAAK,GAAG;oDACjC,WAAU;8DAET,aAAa,GAAG,CAAC,CAAC,uBACjB,8OAAC;4DAA0B,OAAO,OAAO,KAAK;sEAC3C,OAAO,KAAK;2DADF,OAAO,KAAK;;;;;;;;;;gDAK5B,eAAe,KAAK,GAAG,kBACtB,8OAAC;oDAAI,WAAU;8DAAkC;;;;;;;;;;;;;mCA7C9C,KAAK,GAAG;;;;;;;;;;;;;;;;;;;;;0BAyD3B,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAyC;;;;;;kCACvD,8OAAC;wBAAG,WAAU;kCACX,aAAa,GAAG,CAAC,CAAC,qBACjB,8OAAC;;kDACC,8OAAC;;4CAAQ,KAAK,KAAK;4CAAC;;;;;;;oCAAU;oCAAE,KAAK,WAAW;;+BADzC,KAAK,KAAK;;;;;;;;;;;;;;;;;;;;;;AAQjC;AAEO,SAAS;IACd,qBACE,8OAAC,uIAAA,CAAA,YAAS;QAAC,cAAa;kBACtB,cAAA,8OAAC;;;;;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 349, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnebraeckman/Documents/GitHub/eventRunner/src/app/admin/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { Authenticated, Unauthenticated } from \"convex/react\";\nimport { SignInButton } from \"@clerk/nextjs\";\nimport { UserManagement } from \"~/components/admin/UserManagement\";\n\nexport default function AdminPage() {\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"container mx-auto px-4 py-8\">\n        <Authenticated>\n          <AdminContent />\n        </Authenticated>\n        \n        <Unauthenticated>\n          <div className=\"text-center\">\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">Access Restricted</h1>\n            <p className=\"text-gray-600 mb-6\">Please sign in to access the admin panel.</p>\n            <SignInButton mode=\"modal\">\n              <button className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\">\n                Sign In\n              </button>\n            </SignInButton>\n          </div>\n        </Unauthenticated>\n      </div>\n    </div>\n  );\n}\n\nfunction AdminContent() {\n  return (\n    <div className=\"space-y-8\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-3xl font-bold text-gray-900\">Admin Dashboard</h1>\n      </div>\n\n      <UserManagement />\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AAAA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC,8JAAA,CAAA,gBAAa;8BACZ,cAAA,8OAAC;;;;;;;;;;8BAGH,8OAAC,8JAAA,CAAA,kBAAe;8BACd,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAwC;;;;;;0CACtD,8OAAC;gCAAE,WAAU;0CAAqB;;;;;;0CAClC,8OAAC,2KAAA,CAAA,eAAY;gCAAC,MAAK;0CACjB,cAAA,8OAAC;oCAAO,WAAU;8CAAuE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASvG;AAEA,SAAS;IACP,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAG,WAAU;8BAAmC;;;;;;;;;;;0BAGnD,8OAAC,6IAAA,CAAA,iBAAc;;;;;;;;;;;AAGrB","debugId":null}}]
}