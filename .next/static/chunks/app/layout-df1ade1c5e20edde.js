(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{24440:(e,s,r)=>{Promise.resolve().then(r.bind(r,83398)),Promise.resolve().then(r.bind(r,636)),Promise.resolve().then(r.bind(r,671)),Promise.resolve().then(r.bind(r,15256)),Promise.resolve().then(r.bind(r,27016)),Promise.resolve().then(r.bind(r,61657)),Promise.resolve().then(r.bind(r,59891)),Promise.resolve().then(r.bind(r,48977)),Promise.resolve().then(r.t.bind(r,35786,23)),Promise.resolve().then(r.t.bind(r,32936,23)),Promise.resolve().then(r.bind(r,83964))},33584:(e,s,r)=>{"use strict";r.d(s,{K:()=>a,a:()=>l});var t=r(95155);r(12115);var i=r(24761),n=r(78087);function a(e){let{children:s,requiredRole:r,fallback:a}=e,l=(0,i.IT)(n.F.auth.checkUserRole,{requiredRole:r});return void 0===l?(0,t.jsx)("div",{className:"text-gray-500",children:"Checking permissions..."}):l.hasPermission?(0,t.jsx)(t.Fragment,{children:s}):a||(0,t.jsxs)("div",{className:"text-center p-4 bg-red-50 border border-red-200 rounded-md",children:[(0,t.jsx)("p",{className:"text-red-700 font-medium",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-red-600 text-sm",children:l.reason})]})}function l(){let e=(0,i.IT)(n.F.auth.getCurrentUserWithRole);return{userRole:(null==e?void 0:e.role)||null,permissions:(null==e?void 0:e.permissions)||null,isLoading:void 0===e}}},35786:()=>{},48977:(e,s,r)=>{"use strict";r.d(s,{ConvexClientProvider:()=>l});var t=r(95155),i=r(27016),n=r(89620);let a=new(r(24761)).eH("https://grateful-hummingbird-983.convex.cloud");function l(e){let{children:s}=e;return(0,t.jsx)(n.q,{client:a,useAuth:i.d,children:s})}},59891:(e,s,r)=>{"use strict";r.d(s,{Navigation:()=>o});var t=r(95155),i=r(6874),n=r.n(i),a=r(35695),l=r(48879),d=r(24761),c=r(33584);function o(){var e;let s=(0,a.usePathname)(),{isAuthenticated:r}=(0,d.Z)(),{user:i}=(0,l.Jd)(),{permissions:o}=(0,c.a)(),h=[{href:"/",label:"Dashboard",auth:!0,permission:"canViewDashboard"},{href:"/contacts",label:"Contacts",auth:!0,permission:"canViewDashboard"},{href:"/opportunities",label:"Sales Pipeline",auth:!0,permission:"canViewDashboard"},{href:"/leads",label:"Lead Analytics",auth:!0,permission:"canViewDashboard"},{href:"/leads/pipeline",label:"Lead Pipeline",auth:!0,permission:"canViewDashboard"},{href:"/projects",label:"Projects",auth:!0,permission:"canManageProjects"},{href:"/admin",label:"User Management",auth:!0,permission:"canManageUsers"}];return(0,t.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,t.jsxs)("div",{className:"container mx-auto px-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsx)(n(),{href:"/",className:"flex items-center space-x-2",children:(0,t.jsxs)("span",{className:"text-2xl font-bold text-gray-800",children:["event",(0,t.jsx)("span",{className:"text-blue-600",children:"Runner"})]})}),r&&(0,t.jsx)("div",{className:"hidden md:flex space-x-8",children:h.map(e=>{if(e.auth&&!r||e.permission&&o&&!o[e.permission])return null;let i=s===e.href;return(0,t.jsx)(n(),{href:e.href,className:"px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(i?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:e.label},e.href)})}),(0,t.jsx)("div",{className:"flex items-center space-x-4",children:r?(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["Welcome, ",(null==i?void 0:i.firstName)||(null==i||null==(e=i.emailAddresses[0])?void 0:e.emailAddress)]}),(0,t.jsx)(l.uF,{})]}):(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Please sign in to continue"})})]}),r&&(0,t.jsx)("div",{className:"md:hidden py-4",children:(0,t.jsx)("div",{className:"flex flex-col space-y-2",children:h.map(e=>{if(e.auth&&!r||e.permission&&o&&!o[e.permission])return null;let i=s===e.href;return(0,t.jsx)(n(),{href:e.href,className:"px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(i?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:e.label},e.href)})})})]})})}},78087:(e,s,r)=>{"use strict";r.d(s,{F:()=>t});let t=r(3312).dp},83964:(e,s,r)=>{"use strict";let t;r.d(s,{TRPCReactProvider:()=>u});var i=r(95155),n=r(26715),a=r(54875),l=r(5807),d=r(12115),c=r(99177),o=r(52775),h=r(81451);r(49509);let m=(0,l.pY)();function u(e){let s=(null!=t||(t=new o.E({defaultOptions:{queries:{staleTime:3e4},dehydrate:{serializeData:c.Ay.serialize,shouldDehydrateQuery:e=>(0,h.XS)(e)||"pending"===e.state.status},hydrate:{deserializeData:c.Ay.deserialize}}})),t),[r]=(0,d.useState)(()=>m.createClient({links:[(0,a.$H)({enabled:e=>"down"===e.direction&&e.result instanceof Error}),(0,a.N9)({transformer:c.Ay,url:window.location.origin+"/api/trpc",headers:()=>{let e=new Headers;return e.set("x-trpc-source","nextjs-react"),e}})]}));return(0,i.jsx)(n.Ht,{client:s,children:(0,i.jsx)(m.Provider,{client:r,queryClient:s,children:e.children})})}},92206:(e,s,r)=>{"use strict";r.d(s,{y:()=>i});var t=r(34477);let i=(0,t.createServerReference)("7f458e85a98cd75c3d7b739592f4a797ad4c1644c0",t.callServer,void 0,t.findSourceMapURL,"invalidateCacheAction")}},e=>{e.O(0,[907,761,312,879,874,654,441,964,358],()=>e(e.s=24440)),_N_E=e.O()}]);