(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2808:(e,s,r)=>{"use strict";r.d(s,{y:()=>n});var t=r(4477);let n=(0,t.createServerReference)("7f77aa8563ff721cb79490a173c19d8b9574bdefbb",t.callServer,void 0,t.findSourceMapURL,"invalidateCacheAction")},3584:(e,s,r)=>{"use strict";r.d(s,{K:()=>a,a:()=>l});var t=r(5155);r(2115);var n=r(4761),i=r(8087);function a(e){let{children:s,requiredRole:r,fallback:a}=e,l=(0,n.IT)(i.F.auth.checkUserRole,{requiredRole:r});return void 0===l?(0,t.jsx)("div",{className:"text-gray-500",children:"Checking permissions..."}):l.hasPermission?(0,t.jsx)(t.Fragment,{children:s}):a||(0,t.jsxs)("div",{className:"text-center p-4 bg-red-50 border border-red-200 rounded-md",children:[(0,t.jsx)("p",{className:"text-red-700 font-medium",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-red-600 text-sm",children:l.reason})]})}function l(){let e=(0,n.IT)(i.F.auth.getCurrentUserWithRole);return{userRole:(null==e?void 0:e.role)||null,permissions:(null==e?void 0:e.permissions)||null,isLoading:void 0===e}}},3964:(e,s,r)=>{"use strict";let t;r.d(s,{TRPCReactProvider:()=>u});var n=r(5155),i=r(6715),a=r(4875),l=r(8188),d=r(2115),c=r(9177),o=r(2775),h=r(1451);r(9509);let m=(0,l.pY)();function u(e){let s=(null!=t||(t=new o.E({defaultOptions:{queries:{staleTime:3e4},dehydrate:{serializeData:c.Ay.serialize,shouldDehydrateQuery:e=>(0,h.XS)(e)||"pending"===e.state.status},hydrate:{deserializeData:c.Ay.deserialize}}})),t),[r]=(0,d.useState)(()=>m.createClient({links:[(0,a.$H)({enabled:e=>"down"===e.direction&&e.result instanceof Error}),(0,a.N9)({transformer:c.Ay,url:window.location.origin+"/api/trpc",headers:()=>{let e=new Headers;return e.set("x-trpc-source","nextjs-react"),e}})]}));return(0,n.jsx)(i.Ht,{client:s,children:(0,n.jsx)(m.Provider,{client:r,queryClient:s,children:e.children})})}},4440:(e,s,r)=>{Promise.resolve().then(r.bind(r,3398)),Promise.resolve().then(r.bind(r,636)),Promise.resolve().then(r.bind(r,671)),Promise.resolve().then(r.bind(r,5256)),Promise.resolve().then(r.bind(r,7016)),Promise.resolve().then(r.bind(r,1657)),Promise.resolve().then(r.bind(r,9891)),Promise.resolve().then(r.bind(r,8977)),Promise.resolve().then(r.t.bind(r,5786,23)),Promise.resolve().then(r.t.bind(r,2936,23)),Promise.resolve().then(r.bind(r,3964))},5786:()=>{},8087:(e,s,r)=>{"use strict";r.d(s,{F:()=>t});let t=r(3312).dp},8977:(e,s,r)=>{"use strict";r.d(s,{ConvexClientProvider:()=>l});var t=r(5155),n=r(7016),i=r(9620);let a=new(r(4761)).eH("https://grateful-hummingbird-983.convex.cloud");function l(e){let{children:s}=e;return(0,t.jsx)(i.q,{client:a,useAuth:n.d,children:s})}},9891:(e,s,r)=>{"use strict";r.d(s,{Navigation:()=>o});var t=r(5155),n=r(6874),i=r.n(n),a=r(5695),l=r(8879),d=r(4761),c=r(3584);function o(){var e;let s=(0,a.usePathname)(),{isAuthenticated:r}=(0,d.Z)(),{user:n}=(0,l.Jd)(),{permissions:o}=(0,c.a)(),h=[{href:"/",label:"Dashboard",auth:!0,permission:"canViewDashboard"},{href:"/contacts",label:"Contacts",auth:!0,permission:"canViewDashboard"},{href:"/projects",label:"Projects",auth:!0,permission:"canManageProjects"},{href:"/admin",label:"User Management",auth:!0,permission:"canManageUsers"}];return(0,t.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,t.jsxs)("div",{className:"container mx-auto px-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsx)(i(),{href:"/",className:"flex items-center space-x-2",children:(0,t.jsxs)("span",{className:"text-2xl font-bold text-gray-800",children:["event",(0,t.jsx)("span",{className:"text-blue-600",children:"Runner"})]})}),r&&(0,t.jsx)("div",{className:"hidden md:flex space-x-8",children:h.map(e=>{if(e.auth&&!r||e.permission&&o&&!o[e.permission])return null;let n=s===e.href;return(0,t.jsx)(i(),{href:e.href,className:"px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(n?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:e.label},e.href)})}),(0,t.jsx)("div",{className:"flex items-center space-x-4",children:r?(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["Welcome, ",(null==n?void 0:n.firstName)||(null==n||null==(e=n.emailAddresses[0])?void 0:e.emailAddress)]}),(0,t.jsx)(l.uF,{})]}):(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Please sign in to continue"})})]}),r&&(0,t.jsx)("div",{className:"md:hidden py-4",children:(0,t.jsx)("div",{className:"flex flex-col space-y-2",children:h.map(e=>{if(e.auth&&!r||e.permission&&o&&!o[e.permission])return null;let n=s===e.href;return(0,t.jsx)(i(),{href:e.href,className:"px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(n?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:e.label},e.href)})})})]})})}}},e=>{e.O(0,[907,503,312,829,441,964,358],()=>e(e.s=4440)),_N_E=e.O()}]);