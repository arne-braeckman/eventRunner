(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[941],{19989:(e,a,t)=>{"use strict";t.d(a,{An:()=>l,T7:()=>r,nI:()=>s});let s={COLD:{min:0,max:5},WARM:{min:6,max:15},HOT:{min:16,max:1/0}},r=[{value:"WEDDING",label:"Wedding"},{value:"CORPORATE",label:"Corporate Event"},{value:"BIRTHDAY",label:"Birthday Party"},{value:"ANNIVERSARY",label:"Anniversary"},{value:"CONFERENCE",label:"Conference"},{value:"WORKSHOP",label:"Workshop"},{value:"FUNDRAISER",label:"Fundraiser"},{value:"HOLIDAY",label:"Holiday Party"},{value:"REUNION",label:"Reunion"},{value:"OTHER",label:"Other"}],l=[{value:"BRUSSELS",label:"Brussels"},{value:"FLANDERS",label:"Flanders"},{value:"WALLONIA",label:"Wallonia"},{value:"ANTWERP",label:"Antwerp"},{value:"GHENT",label:"Ghent"},{value:"BRUGES",label:"Bruges"},{value:"LEUVEN",label:"Leuven"},{value:"NAMUR",label:"Namur"},{value:"LIEGE",label:"Li\xe8ge"},{value:"OTHER",label:"Other"}]},20530:(e,a,t)=>{Promise.resolve().then(t.bind(t,93994))},26126:(e,a,t)=>{"use strict";t.d(a,{E:()=>i});var s=t(95155);t(12115);var r=t(74466),l=t(59434);let n=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:a,variant:t,...r}=e;return(0,s.jsx)("div",{className:(0,l.cn)(n({variant:t}),a),...r})}},30285:(e,a,t)=>{"use strict";t.d(a,{$:()=>d});var s=t(95155),r=t(12115),l=t(74466),n=t(59434);let i=(0,l.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,a)=>{let{className:t,variant:r,size:l,asChild:d=!1,...c}=e;return(0,s.jsx)("button",{className:(0,n.cn)(i({variant:r,size:l,className:t})),ref:a,...c})});d.displayName="Button"},59434:(e,a,t)=>{"use strict";t.d(a,{cn:()=>l});var s=t(52596),r=t(39688);function l(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.QP)((0,s.$)(a))}},66695:(e,a,t)=>{"use strict";t.d(a,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>n,aR:()=>i});var s=t(95155),r=t(12115),l=t(59434);let n=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});n.displayName="Card";let i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...r})});i.displayName="CardHeader";let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("h3",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});d.displayName="CardTitle";let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},78087:(e,a,t)=>{"use strict";t.d(a,{F:()=>s});let s=t(3312).dp},93994:(e,a,t)=>{"use strict";t.d(a,{LeadPipeline:()=>R});var s=t(95155),r=t(12115),l=t(24761),n=t(78087),i=t(25472),d=t(66695),c=t(26126),o=t(30285),u=t(53904),x=t(71007),m=t(33109),g=t(44992),h=t(69074),f=t(66932),b=t(48136),p=t(19420),v=t(81497),j=t(5623),N=t(19989),y=t(13319);let w=[{id:"UNQUALIFIED",title:"Unqualified",description:"New leads to be qualified",color:"bg-gray-100 border-gray-300"},{id:"PROSPECT",title:"Prospect",description:"Potential leads showing interest",color:"bg-blue-100 border-blue-300"},{id:"LEAD",title:"Lead",description:"Qualified leads in nurturing",color:"bg-yellow-100 border-yellow-300"},{id:"QUALIFIED",title:"Qualified",description:"Ready for proposal/demo",color:"bg-orange-100 border-orange-300"},{id:"CUSTOMER",title:"Customer",description:"Converted leads",color:"bg-green-100 border-green-300"},{id:"LOST",title:"Lost",description:"Leads that didn't convert",color:"bg-red-100 border-red-300"}];function R(){let[e,a]=(0,r.useState)(null),[t,c]=(0,r.useState)({}),b=(0,l.IT)(n.F.contacts.getAllContacts),p=(0,l.n_)(n.F.contacts.updateContactStatus),v=(0,i.FR)((0,i.MS)(i.AN,{activationConstraint:{distance:8}})),j=(0,r.useMemo)(()=>{if(!b)return w.map(e=>({...e,contacts:[]}));let e=[...b];return t.heat&&(e=e.filter(e=>e.leadHeat===t.heat)),t.source&&(e=e.filter(e=>e.leadSource===t.source)),w.map(a=>({...a,contacts:e.filter(e=>e.status===a.id).sort((e,a)=>{let t=(a.leadHeatScore||0)-(e.leadHeatScore||0);return 0!==t?t:a.createdAt-e.createdAt})}))},[b,t]),N=(0,r.useMemo)(()=>{let e=(null==b?void 0:b.length)||0,a=e>0?((null==b?void 0:b.filter(e=>"CUSTOMER"===e.status).length)||0)/e*100:0,t=(null==b?void 0:b.filter(e=>"HOT"===e.leadHeat&&!["CUSTOMER","LOST"].includes(e.status)).length)||0;return{totalContacts:e,conversionRate:a.toFixed(1),avgTimeInPipeline:0,hotLeadsInPipeline:t}},[b]),y=(0,r.useCallback)(e=>{var t;let{active:s}=e,r=null==(t=s.data.current)?void 0:t.contact;r&&a({id:s.id,contact:r})},[]),R=(0,r.useCallback)(async t=>{let{active:s,over:r}=t;if(console.log("Drag end - active.id:",s.id,"over.id:",null==r?void 0:r.id),a(null),!r||!e)return;let l=r.id,n=e.contact;if(console.log("Updating contact:",n.name,"from",n.status,"to",l),n.status!==l)try{await p({contactId:n._id,status:l}),console.log("Successfully updated contact status")}catch(e){console.error("Failed to update contact status:",e)}},[e,p]);return void 0===b?(0,s.jsx)(E,{}):(0,s.jsxs)("div",{className:"space-y-6",children:[!1,(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Lead Pipeline"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Drag and drop leads between pipeline stages"})]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)(o.$,{variant:"outline",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsx)(d.Zp,{children:(0,s.jsx)(d.Wu,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Leads"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:N.totalContacts})]}),(0,s.jsx)(x.A,{className:"h-8 w-8 text-blue-500"})]})})}),(0,s.jsx)(d.Zp,{children:(0,s.jsx)(d.Wu,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Conversion Rate"}),(0,s.jsxs)("p",{className:"text-2xl font-bold",children:[N.conversionRate,"%"]})]}),(0,s.jsx)(m.A,{className:"h-8 w-8 text-green-500"})]})})}),(0,s.jsx)(d.Zp,{children:(0,s.jsx)(d.Wu,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Hot Leads"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:N.hotLeadsInPipeline})]}),(0,s.jsx)(g.A,{className:"h-8 w-8 text-red-500"})]})})}),(0,s.jsx)(d.Zp,{children:(0,s.jsx)(d.Wu,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Pipeline Time"}),(0,s.jsxs)("p",{className:"text-2xl font-bold",children:[N.avgTimeInPipeline,"d"]})]}),(0,s.jsx)(h.A,{className:"h-8 w-8 text-orange-500"})]})})})]}),(0,s.jsxs)(d.Zp,{children:[(0,s.jsx)(d.aR,{children:(0,s.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(f.A,{className:"h-5 w-5"}),"Pipeline Filters"]})}),(0,s.jsx)(d.Wu,{children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o.$,{variant:"HOT"===t.heat?"default":"outline",size:"sm",onClick:()=>c(e=>({...e,heat:"HOT"===e.heat?void 0:"HOT"})),children:"\uD83D\uDD25 Hot Leads"}),(0,s.jsx)(o.$,{variant:"WARM"===t.heat?"default":"outline",size:"sm",onClick:()=>c(e=>({...e,heat:"WARM"===e.heat?void 0:"WARM"})),children:"\uD83C\uDF24️ Warm Leads"}),(0,s.jsx)(o.$,{variant:"COLD"===t.heat?"default":"outline",size:"sm",onClick:()=>c(e=>({...e,heat:"COLD"===e.heat?void 0:"COLD"})),children:"❄️ Cold Leads"})]}),(t.heat||t.source)&&(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>{c({})},children:"Clear Filters"})]})})]}),(0,s.jsxs)(i.Mp,{sensors:v,collisionDetection:i.Qo,onDragStart:y,onDragEnd:R,children:[(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6",children:j.map(e=>(0,s.jsx)(A,{column:e,contacts:e.contacts},e.id))}),(0,s.jsx)(i.Hd,{dropAnimation:{duration:200,easing:"cubic-bezier(0.18, 0.67, 0.6, 1.22)"},children:e?(0,s.jsx)("div",{className:"rotate-3 scale-105 shadow-xl",children:(0,s.jsx)(O,{contact:e.contact,isDragging:!0})}):null})]})]})}function A(e){let{column:a,contacts:t}=e,{setNodeRef:r,isOver:l}=(0,i.zM)({id:a.id});return(0,s.jsxs)(d.Zp,{ref:r,className:"".concat(a.color," min-h-[600px] transition-all ").concat(l?"ring-2 ring-blue-500 ring-opacity-50":""),children:[(0,s.jsxs)(d.aR,{className:"pb-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(d.ZB,{className:"text-lg",children:a.title}),(0,s.jsx)(c.E,{variant:"secondary",className:"mt-1",children:t.length})]})}),(0,s.jsx)(d.BT,{className:"text-sm",children:a.description})]}),(0,s.jsx)(d.Wu,{className:"pt-0",children:(0,s.jsxs)("div",{className:"space-y-3 min-h-[400px] p-2",children:[t.map(e=>(0,s.jsx)(C,{contact:e},e._id)),0===t.length&&(0,s.jsx)("div",{className:"h-16 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center text-gray-500 text-sm",children:"Drop contacts here"})]})})]})}function C(e){let{contact:a}=e,{attributes:t,listeners:r,setNodeRef:l,transform:n,isDragging:d}=(0,i.PM)({id:a._id,data:{contact:a,type:"contact"}}),c={transform:n?"translate3d(".concat(n.x,"px, ").concat(n.y,"px, 0)"):void 0,opacity:d?.5:1,zIndex:d?1e3:"auto"};return(0,s.jsx)("div",{ref:l,style:c,...t,...r,className:d?"cursor-grabbing":"cursor-grab",children:(0,s.jsx)(O,{contact:a,isDragging:d})})}function O(e){let{contact:a,isDragging:t=!1}=e,r=function(e){switch(e>=N.nI.HOT.min?"HOT":e>=N.nI.WARM.min?"WARM":"COLD"){case"HOT":return{badge:"bg-red-100 text-red-800 border-red-200",progress:"bg-red-500",border:"border-red-300",icon:"text-red-500",bgGradient:"bg-gradient-to-r from-red-50 to-red-100"};case"WARM":return{badge:"bg-orange-100 text-orange-800 border-orange-200",progress:"bg-orange-500",border:"border-orange-300",icon:"text-orange-500",bgGradient:"bg-gradient-to-r from-orange-50 to-orange-100"};case"COLD":return{badge:"bg-blue-100 text-blue-800 border-blue-200",progress:"bg-blue-500",border:"border-blue-300",icon:"text-blue-500",bgGradient:"bg-gradient-to-r from-blue-50 to-blue-100"};default:return{badge:"bg-gray-100 text-gray-800 border-gray-200",progress:"bg-gray-500",border:"border-gray-300",icon:"text-gray-500",bgGradient:"bg-gradient-to-r from-gray-50 to-gray-100"}}}(a.leadHeatScore||0),l=function(e){switch(e){case"HOT":return"\uD83D\uDD25";case"WARM":return"\uD83C\uDF24️";case"COLD":return"❄️";default:return"⚪"}}(a.leadHeat);return(0,s.jsx)(d.Zp,{className:"cursor-grab active:cursor-grabbing transition-all duration-200 hover:shadow-md ".concat(t?"shadow-2xl scale-105 rotate-2 border-blue-300":""),children:(0,s.jsx)(d.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900 truncate",children:a.name}),(0,s.jsx)("p",{className:"text-sm text-gray-500 truncate",children:a.email})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 ml-2",children:[(0,s.jsx)("span",{className:"text-lg",children:l}),(0,s.jsx)(c.E,{variant:"secondary",className:"text-xs ".concat(r.badge),children:a.leadHeatScore||0})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[a.company&&(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,s.jsx)(b.A,{className:"h-4 w-4 mr-2 flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:a.company})]}),a.phone&&(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,s.jsx)(p.A,{className:"h-4 w-4 mr-2 flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:a.phone})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(c.E,{variant:"outline",className:"text-xs",children:a.leadSource}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:(0,y.GP)(new Date(a.createdAt),"MMM d")})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"h-2 rounded-full transition-all ".concat(r.progress),style:{width:"".concat(Math.min((a.leadHeatScore||0)/25*100,100),"%")}})}),(0,s.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,s.jsxs)(o.$,{size:"sm",variant:"ghost",className:"h-7 px-2 text-xs",children:[(0,s.jsx)(v.A,{className:"h-3 w-3 mr-1"}),"Contact"]}),(0,s.jsx)(o.$,{size:"sm",variant:"ghost",className:"h-7 px-2 text-xs",children:(0,s.jsx)(j.A,{className:"h-3 w-3"})})]})]})})})}function E(){return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 animate-pulse"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,a)=>(0,s.jsx)("div",{className:"h-24 bg-gray-200 rounded animate-pulse"},a))}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6",children:[...Array(6)].map((e,a)=>(0,s.jsx)("div",{className:"h-96 bg-gray-200 rounded animate-pulse"},a))})]})}}},e=>{e.O(0,[761,312,778,432,441,964,358],()=>e(e.s=20530)),_N_E=e.O()}]);